
FAQ for Rosegarden-4
====================


As there is not yet any user documentation provided for Rosegarden-4,
this FAQ includes a number of bits of useful information that would
normally (and will in the future) be found there instead.


Compilation or installation problems
------------------------------------

Can I build for KDE2 or KDE3?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The short answer is Yes but you have to ensure the correct "admin"
directory is present in the top-level directory.   In CVS and in
the more recent tar balls there are three admin directories:

  rosegarden/admin
  rosegarden/admin_kde2
  rosegarden/admin_kde3

The admin and admin_kde3 directories should be identical and hence we
build Rosegarden for KDE3 by default.  If you want to build for KDE2
then follow the instructions in the INSTALL file - basically you've
got to remove the existing admin/ directory, copy the admin_kde2/ to
admin/ and then run "make -f Makefile.cvs" in the top level before
configuring and then building.

macro `AM_PATH_ALSA' not found in library
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This can happen only when building from CVS. It means you're missing
the 'alsa.m4' file (usually in /usr/share/aclocal) which is normally
part of libalsa (look for a libalsa2-devel package for your
distribution). This causes the 'configure' file to be misconstructed
because the 'aclocal.m4' file won't be properly generated.

If you can't install libalsa, you can still compile Rosegarden by
pre-building the aclocal.m4 file yourself, like this :

  $ aclocal.m4 -I .

(that's what the c_include_me_if_no_alsa.m4 file is for.)

Then restart make -f Makefile.cvs. You will still see the error
message, but the 'configure' file will be properly generated.

arts/artsmidi.idl not found
~~~~~~~~~~~~~~~~~~~~~~~~~~~

You may be missing the kdemultimedia package (and associated -devel
package, if appropriate to your distribution).  Note that you need
this even if you're building --with-alsa.


"Cannot convert a null image" and other errors at startup
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you're getting a stream of errors of this sort followed by a crash
at startup, with Rosegarden-4 0.1.6 or earlier, then you probably
haven't run "make install", or it didn't complete successfully, or it
installed into a non-standard place which you need to add to your
KDEDIRS environment variable before you can start it correctly.


Rosegarden is crashing at startup
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Try running up the sequencer by itself first to see if it's a problem
with that or the main part of the program.  Run:

  $ rosegardensequencer

And you should get a few lines of output finishing with:

  RosegardenSequencer - started OK

If the sequencer is alright then try to start the main application
with the command line switch "--nosequencer".  If that fails then
export the environment variable KDE_DEBUG as follows (in bash):

  $ export KDE_DEBUG=1

And try again and send the output to the authors or the Rosegarden
development mailing list.  Also check back to this FAQ regularly as
we start to add more helpful hints and information.


I'm having trouble building with Mandrake 8.2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Aren't we all?  Mandrake 8.2 appears to have a badly broken default
development environment.  The necessary tweaks to make your system
build Rosegarden correctly are involved and lengthy and probably
best left to Mandrake themselves to explain.  All in all if it doesn't
work out of the box for you then it's probably best if you just forgot
about Mandrake 8.2 altogether and try either 8.1 or a later version.

The Composition View
--------------------

How do I set a loop?
~~~~~~~~~~~~~~~~~~~~

While holding down Shift and and the left mouse button sweep out a loop
region in the ruler at the top or bottom of the main composition window.  
The loop icon in the transport will become enabled and playback will 
always occur within this loop until you disable it.  You can disable
the loop by clicking on the loop icon or shift+left clicking in either
loop ruler.


How do I view the track labels?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

On the main window go to Settings->View Track Labels


How do I change the instrument for a track?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Click and hold the left mouse button on the track/instrument label.
A pop-up will appear from which you can choose a new instrument for
the track.


Notation and Matrix editing
---------------------------

Can I edit all the segments at once in the notation editor?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The _Open in Notation Editor_ option on the main view's _Segments_
menu will open all the currently-selected segments together in a
single editor.  So to open them all, first use the _Edit_ menu's
_Select All Segments_ option, then this one.  (You can also edit a
subset of segments by selecting them with shift-click on the main
view, then using _Open in Notation Editor_.)


Can I edit all the segments at once in the matrix editor?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

No.  A matrix editor shows a single segment only.


Notation rendering is rather slow
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Yes, it can be.  Unlike most other notation applications (including
Rosegarden 2.1), we render the full length of each segment to a canvas
when the notation editor starts, instead of rendering sections at a
time when it scrolls.  This means scrolling should be smooth and quick
but the initial rendering phase relatively slow.  This can be a
problem for long segments, although for other practical reasons you're
probably better off dividing long pieces into more manageable segments
anyway.

You can speed things up somewhat by switching to the RG21 font, which
doesn't look as nice but is easier to draw (though there's not yet any
way to make it the default, so you have to wait until the rendering
has happened before you can switch to it -- oops).  You can also make
scrolling smoother by switching off the chord-label ruler.

There is a particular problem with Qt 2.3.0 and anti-aliased fonts: if
you're using Qt 2.3.0 and have anti-aliased fonts enabled, rendering
performance can be dramatically slower than it should be -- even if
you aren't actually using any anti-aliased fonts in Rosegarden.  See
the Rosegarden-4 README for more details, and consider switching off
anti-aliasing or upgrading to Qt 3 (i.e. KDE 3).


Playback and recording
----------------------


aRts?  ALSA?  Huh?
~~~~~~~~~~~~~~~~~~

Right, it's like this.  Rosegarden-4 can be built without any sound
support ("configure --disable-sound"), with aRts support (the default
configure option), or with ALSA support ("configure --with-alsa").
You have to choose one option when you run configure: you can't
currently have more than one compiled in.

aRts (<URL:http://www.arts-project.org/>) is the standard KDE sound
server.  In theory, it supports audio, MIDI soft synths and outboard
MIDI devices.  In practice the only way you're likely to get good
performance from Rosegarden using aRts is if you have a small number
of outboard hardware MIDI synths and they're all you want to use.
aRts will not drive your soundcard's onboard MIDI synth, the standard
soft synths sound ghastly, and audio/MIDI synchronisation doesn't work
yet.  On the plus side, aRts has a potentially sophisticated
soft-synth architecture if you want to develop your own synths, and it
may be possible to use it on systems other than Linux.

ALSA (<URL:http://www.alsa-project.org/>) is the standard sound system
in Linux 2.5+, and is available for installation on earlier versions
of Linux.  (Some distributions also include it as an optional
package.)  Rosegarden-4 supports ALSA version 0.9.0 (_not_ 0.5.x),
with which it can play to outboard MIDI synths, onboard soundcard MIDI
synths, and ALSA soft-synths, and can record from outboard MIDI
devices.  Setup is easier than with aRts, at least once ALSA is
installed.  For audio support with ALSA, you will also need to obtain
and use JACK (<URL:http://jackit.sourceforge.net/>).

We strongly recommend you use ALSA unless you already know you prefer
aRts or you simply can't get ALSA for your platform.  Every
Rosegarden-4 feature that works with aRts also works with ALSA, and
then some.  The only reason aRts is the default configure option is
that we wrote the aRts driver before the ALSA driver.


Can I use an ALSA soft synth, such as iiwusynth or Timidity?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Yep.  Make sure you're running the soft synth in the alsa-seq mode and make
sure you run it up _before_ you run up Rosegarden.  They you should get
iiwusynth or Timidity channels available in the Instrument dropdowns (click
and hold on the Track labels).

Start up iiwusynth something like this:

   $ iiwusynth -m alsa_seq path/to/soundfont.sf2

Then start Rosegarden and assign some Tracks to the "Synth input port"
Instrument.  By default RG will choose the onboard synth first so
you'll have to manually reassign these Tracks (unless you have no
onboard synth; users of i810 devices without onboard MIDI synth may
find soft synths particularly valuable).

For Timidity use the -iA switch:

  $ timidity -iA

And then select the Timidity Instruments from the dropdown.  You may
need to fiddle with the priorities or buffer sizes with Timidity to
get properly synchronized output.


How do I select an Instrument?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

You can check which Instrument is selected for your Track by making sure
that Settings->Show Track Labels is unchecked.  You can change Instrument
for a Track by clicking and holding on the Track/Instrument label.  A
pop up menu will appear from which you can select a different output
Instrument.  Rosegarden automatically assigns the first available synth
device on your soundcard for its default output Instrument when importing
MIDI files.


I'm using ALSA and I've selected a synth Instrument but I don't hear any sound
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you're hearing silence with a Synth device (say "Emuk10k1 Port 0" or
"OPL 3") then make sure you've loaded a soundfont for your soundcard.
To load soundfonts use the "sfxload" utility.  For example the Creative
SBLive! soundcard comes with a set of standard soundfonts (2gmgsmt.sf2,
4gmgsmt.sf2, 8mbgmsfx.sf2) and you can load the 8MB soundfont as follows:

  $ sfxload 8mbgmsfx.sf2

For more fun with soundfonts including how to create them for yourself
have a look at the Smurf/Swami project: <URL:http://smurf.sourceforge.net/>.

The other classic problem for new users of ALSA is that the mixer
settings are either zero or muted.  Run alsamixer and check that your
levels are okay and unmuted.  (Muting is displayed and changed
separately from the levels themselves: you can be on 100% but still
muted.)


I've followed all your instructions but I still don't hear any sound
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

If you've done everything we've suggested above then you can check
what devices the sequencer is seeing by running the Rosegarden 
sequencer up by itself.  Try:

  $ rosegardensequencer

and examine the output of the screen.  The output for JACK and ALSA
for an SBLive! should look something like this:

  Rosegarden AlsaDriver - alsa-lib version 0.9.0beta12

  ALSA Client information:

      64,0 - (External MIDI 0, MIDI 0-0)          (DUPLEX)
        65,0 - (Emu10k1 WaveTable, Emu10k1 Port 0)          (WRITE ONLY)
        65,1 - (Emu10k1 WaveTable, Emu10k1 Port 1)          (WRITE ONLY)
        65,2 - (Emu10k1 WaveTable, Emu10k1 Port 2)          (WRITE ONLY)
        65,3 - (Emu10k1 WaveTable, Emu10k1 Port 3)          (WRITE ONLY)

        Record client set to (64, 0)

    AlsaDriver::initialiseMidi - can't subscribe output client/port
    AlsaDriver::initialiseMidi -  initialised MIDI subsystem
    AlsaDriver::jackBufferSize - buffer size changed to 1024
    AlsaDriver::jackSampleRate - sample rate changed to 48000
    AlsaDriver::initialiseAudio - JACK sample rate = 48000
    AlsaDriver::jackGraphOrder
    AlsaDriver::initialiseAudio - initialised JACK audio subsystem
    AlsaDriver::jackGraphOrder
    AlsaDriver::jackGraphOrder
    AlsaDriver::jackGraphOrder
    RosegardenSequencer - started OK

Note the ALSA device list shows the external MIDI port and the
wavetable on-board synth devices.  If you're using a soft synth, you
should see it here too.  All of these will be available in the
drop-down Instrument list inside Rosegarden.


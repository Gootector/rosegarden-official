====== Style Bugs ======

It's time to start a list of things somewhere so I can keep track of everything left to do in the ongoing style work.

I wouldn't mind help with certain tasks at this point, but I've established my vision for how this is going to go, and I've put the --LONG-- hours into making it happen, so I hold the veto pen, and nothing should get done without it going across my desk first.

===== Outstanding Issues =====
  - Rotaries are still in a grizzly state
  - Toolbar tooltips still have the wrong colors [NOTE: this is my KDE default background color, and it has proven very sticky to get rid of so far.  Nothing worked.]
  - I disabled the JACK warning dialog, and I need to rewrite it with a don't show button.  I forget how I need to do that, but it looked somewhat complicated, which is why I skipped it at the time.  Something about QSomething::addCustomButtonSomethingOrOther and then plumbing that all to some backend to make it work.  I should do that, or at least remember the dialog is broken.  For now, screw JACK.  I've been getting a thousand xruns a day lately, and I'm tired of looking at the stupid red icon anyway.
  - Audio mixer quite miserable, but these are code bugs now.  "Master" in the wrong place.  The void below should be buttons for plugins, but they don't show up sans stylesheet either.
  - MIDI mixer appears superficially functional except for the faders, but very bland like a dialog suffering from QWidget underspecificity inhertiance glee overload, and probably needs TLC in the style file
  - Comp -> Start and end sizing problem. [and currently: crashing problem at doc->getEndMarker() or similar]
  - The new device manager is really very dreadful in this scheme due to style bugs on the one hand, and due to problems with things that are actually working correctly, like the groupbox backgrounds.  This one needs serious attention, but it's probably pointless until it settles down.  Improve it some, surely, but don't bother trying to get it perfect yet.  (Not really possible.  It has to be styled from the .ui file, because Designer wants to give _1 _2 _3 names to named objects of the same name, and because naming the objects didn't even work on the first one.)
  - VUMeters aren't working properly, and most particularly their numbers are never showing up. [CJ agreed to come to my rescue again on this one.  Long live Chris Fryer. Hip hip hooray!]
  - Menu fonts look like total ass on my system.  Bold fonts are not bold, but drawn twice in a "ghost" mode that looks like channel 13 when I was a kid.  Which Spiderman is the real Spiderman?  No other Qt4 apps seem to have this problem, and we don't have this problem, or it isn't nearly so visible, unless the background for the menu bar is black.  Could be us, could be Qt.  Needs research with an eye toward improving if possible, so I don't wind up taking a ton of crappy looking pixmaps for tutorials.
  - The spinboxes still remain to be styled at all, and need pixmaps [now they're styled, and behaving reasonably, but I haven't styled them for real yet]
  - The matrix is going to need a big makeover, but I'm afraid to touch it until after the qt4-graphicsview merge.  Issues that exist now:
  - Matrix group boxes don't have the same scheme as RosegardenParameterArea and most (one might hope all, but probably not) of the dialogs. [NOTE: This is because the matrix IPB goes directly into the QDockWidget instead of a QGroupBox.  Plan is to put a GroupBox into the layout, and also turn these off by default so they don't appear unless asked for, then we'll see who notices]
  - Matrix piano keyboard is inverted (probably need to fix this with painter.  contemplate ripping off the look of LMMS which has an awesome looking keyboard)
  - The notation editor is probably an even bigger makeover that, again, I'm afraid to touch at this time.  Issues to watch out for though:
  - I like the toolbar handle I've got better than anything else I came up with, but it's only suitable for horizontal toolbars.  I can't discover any way to specify an alternate handle for vertical toolbars in the stylesheet.  If this exists, it isn't documented anywhere, or it's deeply buried in googlespace.  This problem will need to be solved, or else the handles have to go in favor of something more ugly and more workable.  I have some kind of :top :bottom / :left :right thing in there to flip the gradients.  It's not documented, but is there some way I can add :top::separator or some other combo to solve this?  If not, can I solve it with spot stylesheets in the code that creates the toolbars, specifying an alternate pixmap for the grabber?
  - Progress dialogs are coming out solid black.  Progress dialogs are still broken to the point where they're random and useless, so I haven't bothered to try to iron this out at all.  I haven't tried to style the actual progress bars themselves yet either, but that needs to be done eventually.
  - Segments -> Set Start Time has a green background [no longer, but its initial size is still way too small] [something about implementing a sizeHint() and minimumSizeHint() method, I think, I lost track of that page]
  - Stretch or Squash/Rescale has an initial size layout problem too.  Otherwise OK.
  - Segment -> Set Start Time, same as above, plus green background
  - Split At Time, ditto
  - I'm still thinking about getting rid of the metadata editor table thingie, but if we keep it, it still has one thorny style problem.  We need to replace QLineEdit with the subclass (and possibly convert the subclass into a re-implementation like QInputDialog) LineEdit in this table to make the colors work out right when you edit an item.  It's currently awful.  Fixing it looks very possible, by changing with "delegate" QTableWidget uses for these items, but it looks like hours of reading to fix something I never use and would be happy to see deleted, so I am sticking this down way down at the bottom of my TODO list.

===== Fixed Issues =====
  - faders look better, and I'm ignoring them for the duration, but they could use a makeover
  - Some dialogs randomly have a QSizeGrip, and these look stupid. I hate QSizeGrips. I think styling QSizeGrip to a transparent pixmap seems like good insurance against one of these stupid things ever showing up. [NOTE: styling it to {} null seems to have done the trick. I haven't noticed a size grip in a long time, and I think they're probably gone, so I'm checking it off my list until I happen to notice otherwise.]
  - Tempo/Time editor has white/black on "QHeader" I think it was, instead of taking the right style.  This is not what I want, but it's legible, and I won't freak if I have to leave it.
  - Something I deleted today (QInputDialog or QLineEdit-related, I think) actually made text appear in one of the progress dialogs.  Interesting.
  - QTableWidget or whatever needs styling badly, eg. segment summaries, and that additional headers thing I keep bitching about
  - get rid of selected texts turning bold, because the crawling text is getting on my nerves
  - Rulers are being little bitches about taking some effing color other than the default. [Booyah!  I didn't think I'd be able to figure that one out.]
  - Edit button in SPB wasn't disabling itself (since long, long ago it turns out, but I finally noticed because I'm looking at everything under a microscope.  I never noticed that marks have a solid black line at their left edge before either.)
  - NOTE: hover colors are a light blue now.  No gradient.  I debated light blue over #EEEEEE gray endlessly.  The gray seems more thematically appropriate, and the blue is sure to annoy some blue hater.  I like the blue slightly better just because I'm a blue lover.  I put it to a family vote, and got two very favorable "oooh, I like the blue because it stands out better, and it's easier to see" and one "oooh, I like the gray because it stands out better, and it's easier to see" so I had to cast the deciding vote myself, and blue won because I had already used blue as a hover color in pixmaps that were already drawn and done.  Blue won out for a menu selection color over some more thematically appropriate gray too, for similar reasons.
  - <del>PushButtons get weird dotted lines around the text sometimes.  Not sure if this is style-related, or just because this is the button you can hit enter to push or something beyond our control.  I don't like the look, and wish the dotted lines would go somewhere else, but I won't lose a lot of sleep over this one.</del>  1.7.3 has these too.  I just never noticed before.  Probably because I wasn't looking at every part of the GUI under a microscope.
  - Combo dropdown menus need attention generally--probably make them match the menu gradients [NOTE: I'm not really thrilled with this, but it's consistent and it works, so I'm checking it off and moving on to bigger problems.]
  - Manage Metronome: diabled Apply button has no style.  This is a hint.  Otherwise looks OK, I think, except for broken notation widget that's out of scope.  And spinboxes, but hoping a global spinbox fix will percolate widely, due to low conflict potential (like scrollbars)  [NOTE: disabled buttons have style now.  It might need tweaking, but the place to tweak it is evident.]
  - Settle the menu question.  Is this good enough, or still not quite right?  We need a somewhat light background or else a lot of lighter pixmaps, plus I just don't enjoy the stark look of an all black menu, but I'm not quite convinced by any of this yet.  Settle it before settling combo dropdowns. [NOTE: screw it, inertia wins.  This will do.] [NOTE: or not.  Menus have a light gray with black scheme now.  The selection colors aren't quite settled yet.]
  - The track buttons selector colors (hard coded with spot stylesheets out of necessity) just don't look right [so I changed to a dark gray instead, and am considering the same for selection backgrounds elsewhere, or maybe Qt::Blue]
  - The radio buttons and check boxes are using pixmaps I ripped off from some Qt tutorial, and they look dreadful. [NOTE: I wound up going with very plain checkboxes screen clipped out of Plastik or whatever style I'm using in KDE, and I drew new plain jane radio buttons from scratch.  I originally played with LED radio buttons and square LED checkboxes, but I really found that while they looked cool, their function was less apparent than with more conventional looking graphics.] [NOTE: the hover color on these isn't a match for the hover color elsewhere, and I don't think I care.]
  - I never did style the menu checkbox thingies, and they look awful [NOTE: I copied and doctored boilerplate demo code to re-use the same icons as for check boxes elsewhere.  Not sure if I like the look of this or not, but I'm going to leave well enough alone for now.]
  - The QToolButton (I think, TPB) little down arrow thing needs a lighter pixmap for better contrast, but probably not white. [NOTE: I just inverted the same arrow used on the combo, and it looks OK with the stylesheet.  No idea and no longer care how it looks without the stylesheet.  At this point I'm no longer worrying about trying to keep that option open, as I'm going to cram the stylesheet down everybody's throat!  Bwa ha ha ha ha!!!]
  - The color for a selected menu on QMenuBar or whatever it is doesn't look good at all
  - Transport dialog tooltips need another layer of override protection. [NOTE: tooltips are hell, but I have most of them now, and this whole thing is going to be so fragile there's no use sorting it out for the last time until dead last.  We'll see how it goes, but I'm calling it "closed" for now.
  - The parameter area or track buttons and sometimes other things randomly get a weird blue halo around them.  This is some other kind of "this thing is in some kind of selective focus" indicator that's probably coming from Qt, and might have always been there, but now it really shows up against the black.  This is irritating, but I can live with it unless someone has any idea how to turn it off (or if someone has the idea that turning it off would be bad, m'kay?) [NOTE: live with this.  It's bound to be coming from Qt.  I have no clue how to turn it off, and I'm getting used to it, and starting to ignore it.)
  - Configuration page layout needs to be rewritten (oh CJF, please, please do that for me as you can see from this list I have quite a lot to keep me tied up for a long time) and this brings home the point that the code I block copied for the tab widget thingie looks like complete ass. It needs the same gradient as the buttons and combo boxes, and probably black text. [FIXED by Code Jaguar with a little style help]
  - LilyPond options dialog, Headers tab needs some heavy duty attention
  - Edit Document Properties button doesn't do anything, but most likely leads to style nightmare [NOTE: works now, doesn't look bad.]
  - doc properties dialog: no icon for color config.
  - doc properties dialog: color map shows a lot of blank nothing, probably due to background/foreground issues that might be exceedingly ugly to style around.  I think we could probably just drop this, really. [NOTES: I did decide to dump this, rather than fix it.  It was a blind Qt4 conversion gone quite wrong in a number of ways, --plus-- a style nightmare.  I really don't think anybody will miss this, and it seems like another good example of something crufty to get rid of at this most suitable time for such.  YMMV.]
  - Menus are having a problem with text running into the hotkey text. [fixed by adding a min-width: property to the stylesheet, though this seems a bit fragile, and before it's all over, I'm going to test this with my usual "much larger than normal" default font sizes]
  - The damn combo boxes still don't have a working hover. [NOTE: they do now, but their little buttons don't.]
  - File dialogs are utterly miserable.  [This was a refreshing softball.  Five minutes, bam, they look fine.  To the extent that Qt file dialogs don't look terrible, and at this point, who cares.  Screw KDE.  I'll get over it.]
  - The down arrow buttons on the combos used to hover, at least, but no longer. [time to say FUCK IT on this one.  Fuck it, fuck it, fuck it.]
  - The "Edit" button in the SPB inherits a light gray background from its parent. [Not no more it don't.  What I did was ugly in the extreme, but it worked.  Hell yeah baby.]
  - The Tempo editor Filter section needs a spacer (evil) [evil but it works.  fuck it!]
  - All the QInputDialogs I know about that have a QLineEdit in them are now legible, at least, but the QLineEdit style never works [It should now.  I re-implemented QInputDialog as InputDialog to use LineEdit over QLineEdit.  I had to hack this brutally to fix the headers page, but it works well elsewhere.  Conversion is still an ongoing project, but I'll scratch it off my list anyway.]
  - I just noticed/remembered that rulers used to have a hard coded dark gray under the ticks. [fillRect() the backgrounds in the paintEvent() FTW]
  - Random combo boxes have random dropdowns with random colors, like black and green.  I didn't document any of that in the dialogs I ran through and commented on further down.  This is something to watch as I go, and document further. [Hard to prove a negative, but I just ran though everything I could think of, and all the combo boxes at every level are behaving themselves nicely, except for the buttons not hovering, and I've just given up on that one.]
===== Regression Prevention Snapshots =====
Committed revision 9957.
{{http://www.rosegardenmusic.com/wiki/_media/dev:regression_prevention_snapshot_1.png?w=120&h=67}}

Committed revision 10014.
{{http://www.rosegardenmusic.com/wiki/_media/dev:regression2.png?w=120&h=69}}

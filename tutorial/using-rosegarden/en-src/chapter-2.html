<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.1  (Linux)">
	<META NAME="CREATED" CONTENT="20040613;311200">
	<META NAME="CHANGED" CONTENT="20040807;18541400">
	<STYLE>
	<!--
		A:link { color: #ba2c2c }
		A:visited { color: #ba2c2c }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" LINK="#ba2c2c" VLINK="#ba2c2c" BGCOLOR="#ffffff" DIR="LTR">
<H1>Producing Sound</H1>
<P>Many users have written to ask why they are unable to get
Rosegarden to make any noise. It is the most common question asked on
the rosegarden-user mailing list by far, and is especially
troublesome for those newly migrating to Linux from Windows. Before
we start Rosegarden for the first time, I want to explain what is
necessary to pave the way, and have a good first experience. Some of
you already know all this, and those of you who do are invited to
jump ahead to the next chapter, where the interesting part begins.</P>
<P>The topic of sound covers two distinct areas that may or may not
be codependent, depending on the hardware and software you have
available. One the one hand, there are several requirements that must
be met in order to play MIDI with Rosegarden, and on the other, it's
necessary to get the JACK server up and running reliably in order to
make use of Rosegarden's audio features. A working JACK server is
also required to play MIDI with synth plugins, or to play more than
one ALSA software synth at a time. Getting Rosegarden to make noise
can be a complicated business, but hopefully I can help you deal with
whatever set of circumstances you have before you. I cannot, however,
cover every detail of getting every card working with every
distribution. I'm afraid I have to leave some questions unanswered,
lest this chapter become a book unto itself. 
</P>
<P>Here is a roadmap showing all the possible ways to produce sound
with Rosegarden at a glance. It's quite daunting, I know, but I hope
I can help you make sense of it:</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/sound-diagram-master.jpg" NAME="Graphic16" ALIGN=BOTTOM WIDTH=532 HEIGHT=518 BORDER=0></P>
<H2>Playing MIDI</H2>
<P>MIDI under Linux is quite a complicated subject. The available
hardware falls into three broad categories, each with its own special
considerations. <FONT COLOR="#0000ff">External MIDI hardware</FONT>,
<FONT COLOR="#5c8526">internal hardware with ALSA support</FONT>, and
internal hardware without ALSA support. The latter category splits
into <FONT COLOR="#9966cc">ALSA soft synths</FONT> and <FONT COLOR="#5e11a6">synth
plugins</FONT>, which are similar, but slightly different.</P>
<H3>External MIDI Interfaces</H3>
<P>By far the least complicated, and most expensive way to play MIDI
under Linux is to use real MIDI equipment. This can include
keyboards, sound modules, and perhaps even MIDI guitars. A wide range
of equipment is available for this purpose, ranging from
comparatively inexpensive consumer keyboards to professional quality
gear. The cost ranges from hundreds to thousands of dollars however,
and this is not the way to go unless you are serious about MIDI.</P>
<P>If you're fortunate enough to have such equipment, then you
probably already have some idea how to hook it up to your computer.
If the equipment has the ability to produce sound on its own, as some
MIDI keyboards do, then you may wish to use those speakers for MIDI
playback. If your MIDI equipment has no speakers, or if you intend to
record the audio output from this equipment, you may wish to connect
the audio output from your keyboard or sound module to an audio input
jack on your soundcard. This will allow you to route everything
through the <FONT COLOR="#ff8080">soundcard's mixer</FONT>. There are
several choices for external MIDI interfaces.</P>
<H4>Joystick Port MIDI Adapters</H4>
<P>The simplest, least expensive route is the joystick port MIDI
adapter. These are found on many common, low-end soundcards, such as
the Sound Blaster PCI 128 (snd-ens1371). It can be somewhat difficult
to obtain a suitable Y-cable or MIDI box to connect to these things,
but after having obtained one, all that remains is to connect your
equipment using standard 5-pin DIN MIDI cables. With the snd-ens1371
driver, and those for many similar cards, it's only a matter of
making sure the <B>snd-seq-midi </B>and <B>snd-rawmidi</B> drivers
are loaded (using whatever mechanism your particular distribution
provides for that function.)</P>
<H4>USB MIDI Interfaces</H4>
<P>USB is supplanting traditional MIDI cabling, and several
manufacturers are producing keyboards that plug directly into your
computer using standard USB cables. There are also devices available
which provide multi-port MIDI hubs. These hubs attach to your
computer using a USB cable, and the hubs provide several traditional
5-pin MIDI sockets.</P>
<H5>USB Keyboards</H5>
<P><A HREF="http://www.evolution.co.uk/">Evolution</A> manufactures
several models that are known to conform to the standard USB MIDI
specification, which are therefore compatible with Linux. Chris
Cannam, one of the core Rosegarden developers, uses an Evolution-2
keyboard, and reports that it works using the <FONT FACE="Courier 10 Pitch">snd-usb-audio</FONT>
module, which should probably be loaded automatically by hotplug. He
imagines that most other manufacturers' wares are similar.</P>
<H5>USB MIDI Hubs</H5>
<P>The Edriol UM-2 and mAudio MidiSport 2x2 are known to work under
Linux. I have no experience with such things myself, I'm afraid, so I
can only provide second-hand information.</P>
<P>Pedro Lopez-Cabanillas, a contributing Rosegarden developer,
reports that getting the Edriol UM-2 working is as simple as plugging
in the USB cable and loading the <FONT FACE="Courier 10 Pitch">snd-usb-audio</FONT>
module, which should probably be loaded automatically by hotplug.</P>
<P>Pedro and Chris both report that the mAudio MidiSport hubs are
more difficult to get working. Pedro reports that &quot;some of them
require a firmware program to be loaded into the device's RAM before
you can use it. There are GPL firmwares (package ezusbmidi) for the
1-port and 2-port devices (up to Midisport2x2), they are provided as
RPM packages for Red Hat by <A HREF="http://ccrma.stanford.edu/planetccrma/software/">CCRMA,</A>
and for Mandrake by <A HREF="http://rpm.nyvalls.se/">Thac</A>. There
are also ready to use packages from AGNULA/Debian and Gentoo. Or you
can tweak and compile the firmware from its sources.&quot; Chris
reports that users with 2.6-series kernels may have difficulty using
these devices. Pedro suggests that you have a look at the <A HREF="http://ccrma.stanford.edu/planetccrma/software/usbmidi.html">zero
config environment</A> information available from CCRMA if you are
running Red Hat or Fedora.</P>
<H3>MIDI without External Hardware</H3>
<P>For those without external hardware to use, there are two
remaining categories. A few soundcards have built-in MIDI
infrastructure that ALSA can use. Everyone else will have to use some
kind of software synth.</P>
<H4>Cards with Synth Support under ALSA</H4>
<P>This is the next easiest way to get MIDI working. So far as I
know, this category only applies to those with soundcards based on an
Emu chipset, such as the Sound Blaster Live!/Audigy series
(snd-emu10k1), and the AWE 32/64 (snd-emu8000). I have a Sound
Blaster Live! Value Edition myself, and can report that it's easy to
get working, and it sounds reasonably decent.</P>
<H5>SB Live! Modules</H5>
<P>First, you'll need to ensure you have the proper kernel modules
loaded, and that you are using the ALSA modules, which have &quot;snd&quot;
in the name. I have the following modules loaded for my own SB Live!:</P>
<P STYLE="margin-left: 0.79in"><FONT FACE="Courier 10 Pitch">snd-seq-oss
snd-seq-midi snd-emu10k1-synth snd-emux-synth </FONT>
</P>
<P STYLE="margin-left: 0.79in"><FONT FACE="Courier 10 Pitch">snd-seq-midi-emul
snd-seq-virmidi snd-seq-midi-event snd-seq</FONT></P>
<P STYLE="margin-left: 0.79in"><FONT FACE="Courier 10 Pitch">snd-emu10k1
snd-pcm-oss snd-mixer-oss snd-pcm snd-timer</FONT></P>
<P STYLE="margin-left: 0.79in"><FONT FACE="Courier 10 Pitch">snd-hwdep
snd-util-mem snd-page-alloc snd-ac97-codec</FONT></P>
<P STYLE="margin-left: 0.79in"><FONT FACE="Courier 10 Pitch">snd-rawmidi
snd-seq-device snd soundcore</FONT></P>
<H5>Set the Mixer Volume</H5>
<P>Next, you'll need to check to make sure you've turned up your
mixer volumes. I will cover this card's rather complicated mixer in
detail when I talk about managing various inputs and outputs for the
purpose of audio recording. For the moment, it should be sufficient
to ensure the &quot;Music&quot; channel volume is turned up. My mixer
of preference is <A HREF="http://www.suse.de/~mana/kalsatools.html">KAmix</A>.
Unfortunately, it is not widely available outside of SuSE, and you
may have to compile it yourself. It isn't the prettiest mixer, but
it's the only one I've found that lets me control my SB Live!
consistently and efficiently to get the results I want.</P>
<H5>Load a SoundFont</H5>
<P>Finally, you'll need to load a soundfont into the card. These
cards use .sf2 soundfonts that are readily available. I'm not aware
of a soundfont free enough to be included with any distribution of
Linux, so you will most likely have to obtain one from the web, or
perhaps from the CDs that came with your soundcard. I have had good
luck with soundfonts from the <A HREF="http://www.personalcopy.com/linuxfiles.htm">Personal
Copy</A> website, but I make no warranty expressed or implied about
the suitability or legality of their soundfonts, or any other
soundfonts you might obtain on the web for any particular purpose.</P>
<P>Once you have obtained a soundfont, you need to load it into the
card. There isn't currently any user-friendly way of managing this.
I'm developing a utility for this very purpose, but I did not have
time to finish it before releasing this book, and so I will make no
reference to it. In the meantime, your two choices are to run the
command line utility <B><FONT FACE="Courier 10 Pitch">asfxload</FONT></B>,
or to configure Rosegarden to load a soundfont for you at startup,
via <B>Settings -&gt; Configure Rosegarden -&gt; Sequencer -&gt;
General</B></P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/configure-soundfont.png" NAME="Graphic17" ALIGN=BOTTOM WIDTH=532 HEIGHT=280 BORDER=0></P>
<P ALIGN=CENTER><BR><BR>
</P>
<H4>Cards without Synth Support under ALSA</H4>
<P>This is really the &quot;everything else&quot; category. It
includes too many soundcards to list, each with its own set of
modules. The Sound Blaster PCI and Ensoniq AudioPCI cards (ens-1370,
ens-1371, ens-1373), and integrated snd-intel8x0 and snd-via82xx are
probably the most common, but soundcards that fall into this category
are legion. The process for getting them to play MIDI is similar in
all cases.</P>
<H5>Check your Modules</H5>
<P>First, you need to ensure you have the necessary ALSA MIDI
infrastructure by loading the following modules in addition to
whatever other modules you require for your particular hardware:</P>
<P STYLE="margin-left: 0.79in"><FONT FACE="Courier 10 Pitch">snd-seq-midi
snd-seq-virmidi snd-seq-midi-event snd-seq</FONT></P>
<P STYLE="margin-left: 0.79in"><FONT FACE="Courier 10 Pitch">snd-timer
snd-rawmidi snd soundcore</FONT></P>
<P><I>(The above list was extrapolated from the previous SB Live!
example, and may contain modules that won't actually load with your
particular hardware. If loading one or more of the above modules
fails, don't worry about it unless you later find your MIDI subsystem
doesn't work.)</I></P>
<H5>QSynth</H5>
<P>The least complicated way to get one of these cards to play MIDI
is to use <A HREF="http://qsynth.sourceforge.net/">QSynth</A>. It is
a simple to use ALSA soft synth that takes MIDI data as input and
uses <B>.sf2</B> format soundfonts to produce audio output. In its
simplest configuration, it can use ALSA for audio output, avoiding
the need to run JACK. If you already need or want to run JACK, it can
connect its output to JACK instead. In this configuration, you can
also use a variety of other ALSA soft synths such as <A HREF="http://hydrogen.sourceforge.net/">Hydrogen</A>
and <A HREF="http://zynaddsubfx.sourceforge.net/">ZynAddSubFX</A>,
all sharing the same audio output. QSynth is the most useful for
general music production, and so it is my focus here.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/qsynth-main.png" NAME="Graphic19" ALIGN=BOTTOM WIDTH=532 HEIGHT=117 BORDER=0></P>
<H6>Configure the Audio Driver</H6>
<P>The first decision you need to make is whether to use ALSA or JACK
for output. I will cover starting and configuring JACK in detail in a
moment. No matter which option you choose, both are configured via
the <B>Setup</B> button. In this example, I'm using JACK. Take
special note that I have adjusted the sample rate to match the sample
rate I'm using with JACK, which is 48,000 Hz (for reasons I will
explain directly.) Also note that I have checked <B>[x] Auto Connect
JACK Outputs</B>. This allows QSynth to make its own default
connection with JACK, which is very convenient.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/qsynth-audio-setup.png" NAME="Graphic18" ALIGN=BOTTOM WIDTH=418 HEIGHT=269 BORDER=0></P>
<H6>Loading a SoundFont</H6>
<P>Finally, it's necessary to load at least one soundfont. These are
the same <B>.sf2</B> soundfonts used by the SB Live! series of cards,
and they are loaded via a different tab on the same setup page.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/qsynth-soundfonts.png" NAME="Graphic20" ALIGN=BOTTOM WIDTH=418 HEIGHT=270 BORDER=0></P>
<H5>SynthPlugins</H5>
<P>It is also possible to play using synth plugins. There is a
FluidSynth-DSSI plugin that provides essentially the same
functionality as QSynth, except that it's integrated directly into
Rosegarden. I will describe it in detail when I talk about assigning
instruments to tracks, because its configuration and use is entirely
internal to Rosegarden. For the moment it is sufficient to know that
it exists, and that it requires a working JACK server in order to
function.</P>
<H2>Playing Audio</H2>
<P>In order to play audio you will need to run JACK. 
</P>
<P>JACK is short for the &ldquo;Jack Audio Connection Kit.&rdquo;
JACK is a flexible audio server that allows its client applications
to share the audio hardware seamlessly, and to share a common
transport. It provides flexible mechanisms for routing inputs and
outputs to and from client applications using a jack-and-cable
metaphor. It is geared toward the audio professional who wants to get
the lowest possible latency and the best possible performance out of
his or her hardware, but professional or not, it's something you need
to come to terms with JACK if you want to play audio with Rosegarden.</P>
<P>Some of you may have heard of patching kernels, running with
&quot;capabilities,&quot; and other arcane magic associated with
Linux audio. All of that really <B>is</B> necessary to get the best
performance out of JACK, I'm afraid. It's a very complicated business
that I don't understand very well myself. I fear I must leave you in
the hands of <A HREF="http://www.agnula.org/">AGNULA</A> and perhaps
the <A HREF="http://www.linuxdj.com/audio/lad/subscribeall.php3">Linux
Audio Users</A> list for more information if you require more
performance than you can by following these simple instructions to
get JACK running as an ordinary user on an ordinary kernel.</P>
<H3>Starting and Tweaking JACK</H3>
<P>The simplest way to control your JACK server is to use <A HREF="http://qjackctl.sourceforge.net/"><FONT FACE="Courier 10 Pitch">qjackctl</FONT></A>.
It is a very useful utility that provides a convenient way to start
and stop your JACK server, to play with various configuration
parameters to find the best combination for your hardware, and to
manage JACK connections between applications.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/qjackctl-overview.png" NAME="Graphic21" ALIGN=BOTTOM WIDTH=456 HEIGHT=90 BORDER=0></P>
<H3>Configuring the JACK Server</H3>
<P ALIGN=LEFT STYLE="font-weight: medium">To change how your JACK
server is configured, use the <B>Setup</B> button. The process that
follows will probably be tedious and time-consuming, but once you
have discovered the &quot;magic numbers&quot; for your hardware,
everything should continue to work thereafter. Discovering the best
combination is a process of playing with the &quot;Frames/Period&quot;,
&quot;Sample Rate&quot; and &quot;Periods/Buffer&quot; settings. Your
objective here is to find the lowest possible latency, as reported in
the lower right-hand corner of the dialog. As you change settings,
this number will show the results yielded by that combination. You
want the sample rate high, and the frames/periods and periods/buffer
low. I suggest you dial up the lowest possible latency, click on <B>OK</B>,
then try to start the JACK server with the <B>Start</B> button on the
main dialog. If the server fails to start, come back to this dialog
and keep working up until you find a combination that works.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/qjackctl-silvan.png" NAME="Graphic25" ALIGN=BOTTOM WIDTH=494 HEIGHT=359 BORDER=0></P>
<H4>The Evil XRUN</H4>
<P ALIGN=LEFT STYLE="font-weight: medium">It's very important to
avoid xruns. If you find a combination of low-latency settings that
allow the JACK server to start, but which produce a flood of xruns,
you're aiming too high. Xruns are reported in the main QJackCtl
dialog. Ideally, you should see this:</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/JACK-no-xruns.png" NAME="Graphic22" ALIGN=BOTTOM WIDTH=112 HEIGHT=69 BORDER=0></P>
<P ALIGN=LEFT STYLE="font-weight: medium">If, on the other hand, you
see something like this, you have trouble ahead:</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/JACK-know-xruns.png" NAME="Graphic23" ALIGN=BOTTOM WIDTH=113 HEIGHT=64 BORDER=0></P>
<P ALIGN=LEFT STYLE="font-weight: medium">You never want to see this
much red. Seeing any red at all is really unacceptable. Xruns cause
audio dropouts. Clicks, pops, distortions, flanger-like effects. They
are to be avoided at all costs. If you cannot produce a set of
parameters that gets JACK running without xruns, you probably have no
choice but to explore the world of Linux audio performance tweaking.
Even eliminating the xruns is no guarantee that you will be able to
obtain acceptable performance running these things as an ordinary
user. My own performance is just barely good enough that I can't
quite force myself to dive into the arcane world of Linux audio
headlong.</P>
<H3>Managing JACK Connections</H3>
<P>Rosegarden will establish sane default connections automatically.
So will QSynth and Hydrogen, if you've configured them to do so.
ZynAddSubFX and perhaps other JACK-aware applications do not do this.
To see and change the connections, click on the <B>Connections</B>
button. Making or breaking connections is a process of highlighting
one or more items in the left pane and one or more items in the right
pane, then using the <B>Connect</B> or <B>Disconnect</B> buttons as
required.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/qjackctl-connections.png" NAME="Graphic26" ALIGN=BOTTOM WIDTH=532 HEIGHT=306 BORDER=0></P>
<P ALIGN=LEFT STYLE="font-weight: medium"><I>NOTE: You can also use
QJackCtl to manage ALSA MIDI connections. I do not recommend that you
do so while you are running Rosegarden. Rosegarden has its own
internal MIDI router, and it doesn't work properly if you change MIDI
connections externally. However, if, for example, you want to play
your Sound Blaster Live! or QSynth with your MIDI keyboard without
running Rosegarden, you can use QJackCtl's MIDI connection manager to
hook it up.</I></P>
<H1>A First Look</H1>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
Let's begin by starting Rosegarden, and having a look at the main
window. This is where you get an overall view of your work, and
control a number of settings and parameters.</P>
<H2><A NAME="2_1"></A>The Main Window</H2>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
A Rosegarden document is called a composition. The main window is
primarily dedicated to editing at the composition level, so most of
these tools affect your document in a broad way. This is where you
name tracks and assign instruments to them, create and manipulate
segments, and watch a broad overview of playback. (I will explain
these concepts in more detail later on.) This is also where you
configure segment parameters such as label and color. Tempo and time
signature settings exist a composition level, and they may be edited
here in the main window using the tempo ruler.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/main-screenshot.png" NAME="Graphic4" ALIGN=BOTTOM WIDTH=532 HEIGHT=339 BORDER=0></P>
<H2><A NAME="2_2"></A>Special Toolbars</H2>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">One of
the first things you might notice about Rosegarden is that there are
several toolbars at the top of the main window. In addition to the
usual standard controls shared by most KDE applications,</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_mef09e44.png" NAME="Graphic24" ALIGN=BOTTOM WIDTH=275 HEIGHT=29 BORDER=0>
</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
there are several toolbars specific to Rosegarden. You'll choose
various tools for selecting and manipulating segments from the Tools
Toolbar (Select, Move, Resize, New, Erase, Split),</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_m32c71324.png" NAME="Graphic32" ALIGN=BOTTOM WIDTH=184 HEIGHT=28 BORDER=0>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
a subset of transport tools available in the Transport Toolbar
(toggled off by default)<B>,</B></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/mini-transport.png" NAME="Graphic41" ALIGN=BOTTOM WIDTH=203 HEIGHT=28 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
tracks can be added, deleted or moved with the Tracks Toolbar,</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_m7a769b12.png" NAME="Graphic39" ALIGN=BOTTOM WIDTH=125 HEIGHT=27 BORDER=0>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
and once a segment has been created, you can use the Editors Toolbar
to open it in one of the three available editors. You'll also find
icons to start the Quantizer, the Studio configuration dialog, the
Synth Plugin manager, the audio file manager, and the MIDI and audio
mixers.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/editor-mixer-toolbar.png" NAME="Graphic5" ALIGN=BOTTOM WIDTH=272 HEIGHT=28 BORDER=0>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
At the end of it all is the Zoom Slider, which is used to change the
magnification of the Segment Canvas:</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_47dd4a5.png" NAME="Graphic29" ALIGN=BOTTOM WIDTH=259 HEIGHT=26 BORDER=0>
</P>
<H2>The Tracklist</H2>
<P>Rosegarden is a track-based sequencer. Each entry in the tracklist
is a separate track that can have individualized settings for several
different parameters. Each track has a label and an output
assignment, and can be used to record, play, and manipulate either
MIDI or audio data, but never both.</P>
<H3>Instrument vs. Name</H3>
<P STYLE="margin-bottom: 0.2in">The tracklist can be configured to
display either the name you've assigned to the track, or the name of
the instrument to which it is connected. Toggle this behavior with
<B>Settings -&gt; Show Track Labels</B>. I will explain more about
this later on, in <A HREF="../en/chapter-4.html#5 Managing Instruments (under construction)|outline">Managing
Instrument Parameters</A>.</P>
<P STYLE="margin-bottom: 0.2in">Here we see how instrument
assignments are displayed on the tracklist.  In this example, the
tracks are configured to play using instruments #1 and #2,
respectively, on the &quot;Roland SC-33&quot; device.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in"><IMG SRC="../pixmaps/track-list-connections.png" NAME="Graphic3" ALIGN=BOTTOM WIDTH=229 HEIGHT=48 BORDER=0></P>
<H3>Track LEDs</H3>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in">Here we see the labels.
One track has not yet had a name assigned, so it remains
&quot;&lt;untitled&gt;&quot;.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in">Each track has two LEDs.
The blue one is the track mute. If the blue LED is glowing, the track
will be heard during playback. All of the blue LEDs can be turned on
or off all at once with <B>Tracks -&gt; Mute All </B>and <B>-&gt;
Un-Mute All</B>.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in">The red LED lights up to
indicate that the affected track is armed as the destination for
recording operations.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in"><IMG SRC="../pixmaps/track-list-names.png" NAME="Graphic10" ALIGN=BOTTOM WIDTH=231 HEIGHT=49 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<I>TIP: The mute LEDs can also be used to control which tracks are
included when exporting the composition into another format. Muted
tracks will typically be ignored during export, though this varies
slightly by the export method chosen.</I></P>
<H3><A NAME="2_6_4"></A>Changing the Track Name</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">To change
the track name, double click on the label. A dialog should appear,
allowing you to enter a new name.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_m3266770c.png" NAME="Graphic43" ALIGN=BOTTOM WIDTH=393 HEIGHT=112 BORDER=0></P>
<H3>Adding, Removing, Moving Tracks</H3>
<P>The tools on the Tracks Toolbar 
<IMG SRC="../pixmaps/using-rosegarden_html_m7a769b12.png" NAME="Graphic9" ALIGN=BOTTOM WIDTH=125 HEIGHT=27 BORDER=0>
can be used to move tracks up and down, to delete them, or to create
new tracks. It is not possible to copy an entire track.</P>
<H2 STYLE="border: none; padding: 0in"><A NAME="2_3"></A>Segments and
Segment Parameters</H2>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">Rosegarden
compositions are made up of <B>segments</B>, and editing at the
composition level involves dragging them around and rearranging them
within tracks. Segments are a universal container that may hold
either MIDI events or audio data. Segments are rather similar to
layers in an image editing program such as the GIMP. They can be cut,
pasted, split, re-combined, overlapped and pretty much rearranged at
will, and are very flexible. While there are, understandably, some
differences in the way audio and MIDI segments behave, they can be
manipulated in almost exactly the same way within the composition.
The only real limitation is that audio segments and MIDI segments
cannot both play in the same track.</P>
<H3>Creating a New Segment</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
You can begin recording (audio or MIDI) to create a segment, but I'll
get into that a bit later. For now, why not draw one from scratch?</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
Use the 
<IMG SRC="../pixmaps/using-rosegarden_html_4c452e31.png" NAME="Graphic65" ALIGN=BOTTOM WIDTH=27 HEIGHT=26 BORDER=0>
tool to create a new segment. Click and drag it out to the desired
length:</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_3c571111.png" NAME="Graphic66" ALIGN=BOTTOM WIDTH=521 HEIGHT=86 BORDER=0>
</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">Now that
a segment exists, you can open it with one of the three editors.  I
will return to that idea later on.</P>
<H3>Moving and Copying</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
Use the 
<IMG SRC="../pixmaps/using-rosegarden_html_5b745bd6.png" NAME="Graphic67" ALIGN=BOTTOM WIDTH=26 HEIGHT=24 BORDER=0>
cursor to select a segment:</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_1a3ae2b8.png" NAME="Graphic68" ALIGN=BOTTOM WIDTH=472 HEIGHT=111 BORDER=0>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal; font-weight: medium">
Drag it to a new track:</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_m7008681b.png" NAME="Graphic70" ALIGN=BOTTOM WIDTH=440 HEIGHT=134 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal; font-weight: medium">
Hold down Ctrl while dragging it back,and make a copy:</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_m5ec59c8b.png" NAME="Graphic71" ALIGN=BOTTOM WIDTH=461 HEIGHT=121 BORDER=0></P>
<H3>Splitting and Joining</H3>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal; font-weight: medium">
Use the 
<IMG SRC="../pixmaps/using-rosegarden_html_79e4c412.png" NAME="Graphic72" ALIGN=BOTTOM WIDTH=25 HEIGHT=26 BORDER=0>
cursor to split one of the segments, then switch to the 
<IMG SRC="../pixmaps/using-rosegarden_html_5b745bd6.png" NAME="Graphic42" ALIGN=BOTTOM WIDTH=26 HEIGHT=24 BORDER=0>
and drag one of the pieces so that it overlaps the segment on the
other track. By default, this will snap to whole beat positions
within the bar, but you can override that behavior by holding down
the shift key while dragging.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/using-rosegarden_html_m744cffee.png" NAME="Graphic73" ALIGN=BOTTOM WIDTH=451 HEIGHT=115 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal; font-weight: medium">
Highlighting the smaller of two overlapping segments can sometimes be
a bit tricky, but once accomplished, you can use <B>Segments -&gt;
Join</B> to combine several segments into one, rather like flattening
the layers in an image editing program.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal; font-weight: medium">
This can also merge MIDI events from several different tracks into a
single segment. The events will combine, and merge onto a segment on
whichever track is currently active.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal; font-weight: medium">
Audio segments can be split and resized, but they cannot be joined or
merged.  If you split an audio segment, you can undo that operation
to revert it to its original state, but you cannot, for example, cut
out the middle and splice the ends back together.  Neither can you
merge two overlapping audio segments into one, nor merge audio and
MIDI segments together.</P>
<H4>Split by Pitch</H4>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal; font-weight: medium">
If you have a segment where the treble and bass parts are jumbled
together, you might wish to split this at middle C or thereabouts.
You can use <B>Segments -&gt; Split and Join -&gt; Split by Pitch</B>
and then make your selections for split point, clef handling, etc.
from the resulting dialog. By default, this feature attempts to split
the segment intelligently, so that you can hopefully avoid winding up
with treble notes in the bass part, and bass notes in the treble
part.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/main-split-by-pitch.png" NAME="Graphic8" ALIGN=BOTTOM WIDTH=207 HEIGHT=229 BORDER=0></P>
<P>Once split, the two segments will overlap exactly on the same
track. It is impossible to select a segment that lies completely
underneath another segment, so it is probably a good idea to move one
of the two halves into a different track.</P>
<H3>Segment Previews</H3>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
You can get some sense of what that bit of music is like just by
looking at the segment display, which is a useful visual aid when
dragging things around. If this feature is not turned on, turn it on
with <B>Settings -&gt; Segment Previews</B>. This displays a
miniature &ldquo;piano roll&rdquo; for MIDI segments, and a drawing
of the wave form for audio segments.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in; text-decoration: none">
<IMG SRC="../pixmaps/segment-previews.png" NAME="Graphic1" ALIGN=BOTTOM WIDTH=240 HEIGHT=143 BORDER=0></P>
<H3>Segment Parameters</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">After you
have created a segment, you can edit various parameters from the
<B>Segment Parameters</B> box to the left: 
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/segment-parameters.png" NAME="Graphic6" ALIGN=BOTTOM WIDTH=312 HEIGHT=198 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
Every segment can have a unique label and color. In this example,
I've chosen the most obvious color to use for this French horn part,
but colors are entirely user-configurable, and these defaults are
only suggestions. I'll explain how to configure custom colors later
on, in the Studio chapter.</P>
<H3>Repeats</H3>
<P>Every segment can be made to repeat. It will keep repeating until
the end of the document, or until another segment is encountered in
the track; whichever comes first. These are displayed between repeat
signs ( |: :| ) in the notation editor.</P>
<P>You can turn all repeats into copies at once with <B>Segments -&gt;
Turn Repeats into Copies</B>, or you can turn individual repeats into
copies by double clicking on the light colored repeat rectangles.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/segment-repeats-copies.png" NAME="Graphic7" ALIGN=BOTTOM WIDTH=223 HEIGHT=84 BORDER=0></P>
<H3>Segment Quantizer</H3>
<P>Changing the setting in this box will immediately quantize all
notes in this segment to the selected grid position. It will move the
start times forward or back to align them with the next closest beat
at the desired resolution. It will not change note durations in any
way.</P>
<H3>Transposing Instruments</H3>
<P>If you wish to write notation for transposing instruments, you can
dial a transposition setting into the <B>Transpose</B> box. This will
cause the part to sound in a different range from written. A typical
Bb trumpet part, for example, should have -2 here. I'll cover this
subject in more depth later on, in the Notation chapter.</P>
<H3>Delay</H3>
<P>The <B>Delay</B> setting allows you to knock the timing of a
segment out of sync on purpose. This can be useful in various ways,
and it's especially amusing for transforming a nicely performed MIDI
file into a simulation of a middle school band concert.</P>
<H2>Getting Around in the Composition</H2>
<P STYLE="font-weight: medium">If you've been following along thus
far, you don't actually have anything useful to play.  This might be
a good time to load one of the sample files from the Rosegarden
Library.  The first time you use the <B>File -&gt; Open</B> menu, you
should be looking at the Library.  If not, there should be an icon in
the SpeedBar that will direct you to these files.</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><IMG SRC="../pixmaps/file-example-files.png" NAME="Graphic27" ALIGN=BOTTOM WIDTH=418 HEIGHT=237 BORDER=0></P>
<P ALIGN=LEFT STYLE="font-weight: medium"><I>PLUG:  The highlighted
file is my own creation.  &quot;Perfect Moment&quot; is the name of a
yellow rose, incidentally.  As it happens, that is actually the only
original composition I have ever done with Rosegarden.  I have spent
so much time writing, programming, and testing that I have had little
time for my own musical pursuits.  This file uses the new XSynth-DSSI
analog synth plugin for two parts.</I></P>
<H3>The Playback Pointer</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
Notice that there's a vertical blue bar running vertically across the
segment canvas. That bar is the playback pointer, and as it sweeps
across the canvas, you'll hear the events as it passes over them.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/playback-pointer.png" NAME="Graphic31" ALIGN=BOTTOM WIDTH=65 HEIGHT=199 BORDER=0></P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
While you can't grab it and move it around directly, you can position
it any arbitrary point in the composition by clicking along the dark
gray portion of the ruler at the top, or you can use the transport to
move it around. If you don't see it, play with the transport or the
ruler until you coax it out of hiding.</P>
<H3>Loops</H3>
<P>You can loop a portion of the composition.  Set the loop region by
holding shift and clicking on the gray portion of the ruler, then
dragging the white bar.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/ruler-loops.png" NAME="Graphic28" ALIGN=BOTTOM WIDTH=234 HEIGHT=71 BORDER=0></P>
<H3>The Transport</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
You should have a separate, floating Transport window like this one.
If it's not visible, then toggle it on with <B>Settings -&gt; Show
Transport</B>.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/transport.png" NAME="Graphic11" ALIGN=BOTTOM WIDTH=360 HEIGHT=121 BORDER=0></P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">Most of
these should be self-explanatory. If you can't figure out what any of
the buttons do, hover over them a bit, and context-sensitive help
will pop up.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
The 
<IMG SRC="../pixmaps/transport-switch-modes.png" NAME="Graphic30" ALIGN=BOTTOM WIDTH=27 HEIGHT=25 BORDER=0>
button switches between various display modes, including a visual
metronome that flashes beats at you in color.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">Of
special note are the panic, metronome, and solo buttons. If they're
missing, toggle the extra controls via the 
</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in"><IMG SRC="../pixmaps/transport-flap.png" NAME="Graphic33" ALIGN=BOTTOM WIDTH=28 HEIGHT=29 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal">
The panic button will stop any instruments that have gotten stuck
droning for some reason (as sometimes happens when a synth loses
track of the state of  its sustain controller, for example).</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
The metronome does what you'd probably expect. You can turn the
metronome on during normal playback, as well as recording, and it is
a useful tool to use when practicing playing along with your
composition. Configure it via <B>Composition -&gt; Studio -&gt;
Manage Metronome</B>.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
The solo button forces the Transport to play only whatever track is
currently selected at the moment, independent of its mute state. (To
&quot;solo&quot; more than one part, you'll need to set the mute for
tracks individually, or by using <B>Tracks -&gt; Mute All Tracks</B>
and then un-muting the parts you desire.)</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
The loop button causes the Transport to loop within the region
defined on the ruler.</P>
<H2>Time and Tempo</H2>
<P>As I mentioned, the time signature and tempo are global to the
entire composition. I'll discuss another way to manipulate these in
<A HREF="chapter-7.html">Chapter 7</A>, but here and now you can
manipulate both time signature and tempo to your heart's content from
the main window.</P>
<P>The tempo ruler changes color to indicate changes in tempo. When a
change occurs, the tempo is displayed along the top half of the
ruler, and the time signature is displayed across the bottom. If you
double click this ruler, the Tempo and Time Signature editor will
appear.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/time-tempo-editor.png" NAME="Graphic12" ALIGN=BOTTOM WIDTH=402 HEIGHT=228 BORDER=0></P>
<H3>New Tempo</H3>
<P>To add a new tempo, click the 
<IMG SRC="../pixmaps/tempo-icon.png" NAME="Graphic2" ALIGN=BOTTOM WIDTH=26 HEIGHT=21 BORDER=0>
icon, and you'll be presented with a dialog like this:</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/tempo-add.png" NAME="Graphic13" ALIGN=BOTTOM WIDTH=384 HEIGHT=178 BORDER=0></P>
<P ALIGN=LEFT>By default, new events you add here will be inserted at
the point in time where you clicked to open the Tempo and Time
Signature editor. You can change this by adjusting the &quot;Time of
tempo change&quot; parameters, if you wish.</P>
<H3>New Time Signature</H3>
<P>Use the 
<IMG SRC="../pixmaps/tempo-time-icon.png" NAME="Graphic14" ALIGN=BOTTOM WIDTH=24 HEIGHT=22 BORDER=0>
icon, and you'll be presented with a dialog like:</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/tempo-time-dialog.png" NAME="Graphic15" ALIGN=BOTTOM WIDTH=383 HEIGHT=282 BORDER=0></P>
<P ALIGN=LEFT>You can display the time signature as cut or common
time, and make the time signature hidden. You should probably always
leave &quot;Correct the durations of the following measures&quot;
checked unless you have a good reason to do otherwise. 
</P>
<H3>Document Markers</H3>
<P>Markers are special events that can be used to mark of particular
passages in the music at a composition level.  They appear on the
ruler, and can be edited from <B>Composition -&gt; Edit Markers</B><SPAN STYLE="font-weight: medium">...
 Issuing this command summons the marker editor dialog.  In this
example, I've already created a sample pair.  The &quot;Marker Name&quot;
portion is what appears on the ruler, and the &quot;Marker
description&quot; is for the informational purposes of the composer
only.</SPAN></P>
<H4>The Manage Markers Dialog</H4>
<P ALIGN=CENTER STYLE="font-weight: medium"><IMG SRC="../pixmaps/document-markers.png" NAME="Graphic34" ALIGN=BOTTOM WIDTH=304 HEIGHT=339 BORDER=0></P>
<H4>Creating a New Marker</H4>
<P>Click on the <B>Add</B><SPAN STYLE="font-weight: medium"> button
to create a new marker.  A raw default marker will appear on the list
spontaneously.</SPAN></P>
<P ALIGN=CENTER STYLE="font-weight: medium"><IMG SRC="../pixmaps/document-markers-add-marker.png" NAME="Graphic35" ALIGN=BOTTOM WIDTH=374 HEIGHT=101 BORDER=0></P>
<P ALIGN=LEFT STYLE="font-weight: medium">To edit it, or to edit an
existing marker, double click on it.  An editor like this will
appear, allowing you to set the name and description, and adjust the
time at which this marker will display.</P>
<P ALIGN=CENTER STYLE="font-weight: medium"><IMG SRC="../pixmaps/document-markers-edit-marker.png" NAME="Graphic36" ALIGN=BOTTOM WIDTH=380 HEIGHT=225 BORDER=0></P>
<P ALIGN=LEFT STYLE="font-weight: medium"><I>NOTE:  Markers cannot be
dragged around or otherwise edited from the ruler.  They must be
positioned and edited from this pair of dialogs, using the above
controls.</I></P>
<H4>Markers In Position</H4>
<P>After closing out the manager dialog, the markers you created will
appear on the ruler.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/document-markers-on-ruler.png" NAME="Graphic37" ALIGN=BOTTOM WIDTH=408 HEIGHT=99 BORDER=0></P>
<H2>Autosave</H2>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal">
I'll conclude this section by mentioning a very useful feature that
doesn't quite fit in anywhere else. As always, &quot;save early, save
often&quot; is the mantra of computer users everywhere, and can't be
stressed enough. It's never a bad idea to take time out to save your
work.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal">
However, Rosegarden attempts to save you from yourself.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal">
If you have a power outage or the like, the next time you start
Rosegarden and attempt to load the file you were working on, you'll
be presented with the option of loading the autosave file instead. If
you hadn't yet saved the file, you'll find it in your ~/autosave
directory with a basic name of &quot;untitled.&quot;</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-style: normal; font-weight: medium">
The autosave interval defaults to 60 seconds. Configure it via the
Settings menu.  If you notice Rosegarden grabbing a lot of your CPU
time for no apparent reason, it's probably autosave, and you might
want to increase the interval, or turn this feature completely off. 
It was frankly more useful when Rosegarden was young, and unstable.</P>
</BODY>
</HTML>
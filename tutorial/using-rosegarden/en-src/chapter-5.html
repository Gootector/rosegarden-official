<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.2  (Linux)">
	<META NAME="CREATED" CONTENT="20040613;311800">
	<META NAME="CHANGED" CONTENT="20040815;19204400">
	<STYLE>
	<!--
		@page { size: 8.5in 11in }
		H2.western { font-family: "Albany", sans-serif; font-size: 14pt; font-style: italic }
		H2.cjk { font-family: "HG Mincho Light J"; font-size: 14pt; font-style: italic }
		H2.ctl { font-family: "Arial Unicode MS"; font-size: 14pt; font-style: italic }
		H3.western { font-family: "Albany", sans-serif }
		H3.cjk { font-family: "HG Mincho Light J" }
		H3.ctl { font-family: "Arial Unicode MS" }
		H4.western { font-family: "Albany", sans-serif; font-size: 11pt; font-style: italic }
		H4.cjk { font-family: "HG Mincho Light J"; font-size: 11pt; font-style: italic }
		H4.ctl { font-family: "Arial Unicode MS"; font-size: 11pt; font-style: italic }
		H5.western { font-family: "Albany", sans-serif; font-size: 11pt }
		H5.cjk { font-family: "HG Mincho Light J"; font-size: 11pt }
		H5.ctl { font-family: "Arial Unicode MS"; font-size: 11pt }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H1>Managing Instruments (mostly finished)</H1>
<P>You want to play a particular track using a hammered dulcimer, or
else you've got an audio track that needs some EQ. In either case,
you need an introduction to the <B>instrument</B>. Instruments are
configured with the <B>Instrument Parameters</B> box, and any number
of tracks can be assigned to play via the same instrument. 
</P>
<H2 CLASS="western">Instruments</H2>
<P>The previous chapter introduced you to the device, which is a
construct Rosegarden uses to encapsulate information about what lies
on the other side of a play or record connection, and make the
capabilities of that equipment available to you. Hand in hand with
the device is the <B>instrument</B>.</P>
<P>Every device has 16 instruments numbered #1 through #16. When
working with MIDI playback devices, each of these instruments
encapsulates a MIDI output channel (the same channel as the number of
the instrument by default, although this relationship is not fixed),
a bank/program/variation assignment, and any initial controllers you
wish to affect the associated channel. These instruments allow you to
assemble up to 16 collections of programs/controllers per device and
assign these combinations to any number of tracks. If your JACK
server is running (and if your distro compiled and packaged
Rosegarden properly), you should have both an &quot;Audio&quot;
device and a &quot;Synth plugin&quot; device in addition to however
few or many MIDI devices you have available. Each and every one of
these has 16 instruments.</P>
<P>When working with audio and synth plugins, these instruments serve
the same purpose as MIDI channels, allowing you to configure up to 16
different combinations of LADSPA plugins, volume and pan settings,
programs (for synth plugins) and so forth, and then apply these
combinations to any number of different tracks.</P>
<P>I'll try to illustrate the point with some diagrams depicting the
three general types of instruments. Here we have a sample MIDI
instrument that will play using a hammered dulcimer program. All
tracks assigned to play via this instrument will play using the first
output port on the Sound Blaster Live!, using program 16 from bank 0
0, with an initial volume of 100, and an initial reverb level of 97.
This instrument will show up as &quot;Sound Blaster Live! (1) #12
(Hammered Dulcimer)&quot; on the menu.</P>
<P><I>NOTE: While the instrument number and channel do coincide by
default, it's possible to change this relationship. I have done so in
this example. Instrument #12 plays using channel 6.</I></P>
<P><IMG SRC="../pixmaps/instrument-diagram.jpg" NAME="Graphic10" ALIGN=BOTTOM WIDTH=223 HEIGHT=255 BORDER=0></P>
<P ALIGN=LEFT>This is a typical synth plugin instrument. The sound it
makes will depend on the synth plugin used, but all tracks assigned
to play via this instrument will make the same sound. Its output will
be piped through the EQ and Reverb plugins, and this instrument will
show up as &quot;Synth plugin #12&quot; on the menu.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/plugin-instrument-diagram.jpg" NAME="Graphic11" ALIGN=BOTTOM WIDTH=372 HEIGHT=205 BORDER=0></P>
<P ALIGN=LEFT>This is a typical audio instrument. Any audio tracks
assigned to play via this instrument will have their output piped
through the EQ and Reverb plugins, and this instrument will show up
as &quot;Audio #12&quot; on the menu.</P>
<P ALIGN=RIGHT><IMG SRC="../pixmaps/jack-instrument-diagram.jpg" NAME="Graphic12" ALIGN=BOTTOM WIDTH=264 HEIGHT=175 BORDER=0></P>
<P ALIGN=LEFT><BR><BR>
</P>
<P ALIGN=LEFT>Notice that all of the above examples were &quot;instrument
#12,&quot; and yet all three of them will produce quite different
results, because each of them is the &quot;instrument #12&quot; of a
completely different device.</P>
<H2 CLASS="western">Routing a Track to a Device and Instrument</H2>
<P>The first step in the assignment process is to route a track to a
particular device. The device you use will determine whether you can
play audio or MIDI data on this track. In order to make this device
assignment, begin by clicking the mouse cursor in this area, and
holding a moment until a context menu appears.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/click-and-hold.png" NAME="Graphic3" ALIGN=BOTTOM WIDTH=231 HEIGHT=51 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
You should be presented with a series of two menus that allow you to
choose first the device and then the instrument for this track.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
In this case, I chose to route it to my &quot;Roland SC-33&quot;
device, which is ultimately connected through my Rosegarden studio to
play through ALSA port 64:0, and thus the Roland Sound Canvas I have
plugged into the box physically attached to my computer.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
Then I assigned it to that device's instrument #6. Prior to taking
this snapshot, I had already configured this instrument to play using
the &quot;Piano 1&quot; program with the <B>Instrument Parameters </B>box
(more on that in a bit), and so that name appeared in parenthesis in
the second menu. If an instrument hasn't already been directed to
make use of a particular program, only the instrument number will
appear on this menu, as is the case for most of the other instruments
depicted.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/select-midi.png" NAME="Graphic4" ALIGN=BOTTOM WIDTH=253 HEIGHT=215 BORDER=0>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
Notice also that instrument #10 has (D) in parenthesis, indicating
that this instrument is normally used for playing drums. (Whether it
actually plays drums depends on the capabilities of the MIDI
equipment or software synth represented by this &quot;device,&quot;
and probably depends on this instrument continuing to remain at the
default channel assignment of 10.) In this example, I arranged
beforehand for this instrument to play using the &quot;Power&quot;
drum kit.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
The remaining &quot;instruments&quot; are not assigned to anything in
particular yet, and on most General MIDI-compliant equipment (or
software synths) these &quot;instruments&quot; will probably play
using a factory default piano program, with volume and other
controllers set to neutral default values. Some equipment may not
actually produce any noise until you explicitly assign a program to
any instruments you use.</P>
<H2 CLASS="western">MIDI Instrument Parameters</H2>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">Now that
the track has had its output routed to a MIDI output device and
instrument, and is therefore a MIDI track, the <B>Instrument
Parameters</B> box will display controls similar to these. They allow
you to reassign the channel for this &quot;instrument,&quot; and to
dial in a program. Depending on how your synth/soundfont is set up,
you may have to deal with a few different scenarios here.</P>
<H3 CLASS="western">Simple General MIDI Instruments</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">At the
simple end, assigning a &quot;Harpsichord&quot; program to a basic
General MIDI device only requires that you use the <B>Program</B>
combo box to pick out the appropriate name.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/midi-ins-params-GM.png" NAME="Graphic16" ALIGN=BOTTOM WIDTH=228 HEIGHT=208 BORDER=0></P>
<H3 CLASS="western">GS Program and Variation Instruments</H3>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
With any of the GS devices from the Library, you can dial in both the
program and variation. For example, &quot;Church Org 3&quot; is a
variation of &quot;Church Org 1.&quot; In order to get here, dial
&quot;Church Org 1&quot; into the <B>Program</B> combo box, and then
dial through the possible variations with the <B>Variation</B> combo
box.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/instrument-parameters-midi-ins.png" NAME="Graphic2" ALIGN=BOTTOM WIDTH=228 HEIGHT=206 BORDER=0></P>
<H3 CLASS="western">Drum Instruments</H3>
<P>Most MIDI equipment has some way of playing drums using a bank of
percussion sounds that are mapped to various pitches on the keyboard.
Basic General MIDI equipment has only one standard drum kit, and you
most likely need not do more than assign an instrument to output on
channel 10 in order to make use of it. Most higher-end equipment and
many soundfonts offer alternatives to this standard kit.</P>
<H3 CLASS="western">GS Drum Kits</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">The GS
drum kits and the Capital Tones/General MIDI programs are both in
bank 0 0. If a particular channel on the hardware is set to be in
drum mode, that channel will respond to program changes by playing
with alternate drum kits; otherwise it will play programs and
variations in the usual fashion. For our purposes here, it is
sufficient to know that channel 10 is normally in drum mode by
default. In order to access the alternate set of programs for bank 0
0, check the <B>[x] Percussion</B> checkbox, then dial a new kit into
the <B>Program</B> combo box. Here I have dialed in the &quot;Power&quot;
kit for my Sound Canvas.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/instrument-parameters-midi.png" NAME="Graphic6" ALIGN=BOTTOM WIDTH=228 HEIGHT=204 BORDER=0></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<I>Rosegarden's knobs have come a long way since this shot was taken.</I></P>
<H3 CLASS="western">Alternate Drums in Separate Banks</H3>
<P>The pattern for most other equipment, and for most soundfonts, is
to put alternate drum kits into bank 1 0. To get to the &quot;TR 808&quot;
kit in the &quot;PC51f.sf2&quot; soundfont I normally use on my Sound
Blaster Live!, I dialed in bank 1 0 and program 26. 
</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/matrix-pick-tr-808.png" NAME="Graphic46" ALIGN=BOTTOM WIDTH=190 HEIGHT=112 BORDER=0></P>
<P ALIGN=LEFT><I>NOTE: Pay particular attention to the fact that
since the drum programs we're after in this case are </I>not <I>in
the same bank as the General MIDI programs, the <B>Percussion</B>
checkbox is </I>not <I>checked.</I></P>
<H3 CLASS="western">Controller Knobs</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">You may
change the default controller values by adjusting the knobs. The
tooltip explains how to use them just as well as I could.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/instrument-parameters-knobs.png" NAME="Graphic14" ALIGN=BOTTOM WIDTH=304 HEIGHT=100 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<I>NOTE: If your knobs do not have a crisp, clear appearance like the
ones above, you might need to increase your KDE color contrast to a
higher setting. Low contrast produces rather fuzzy, indistinct knobs.
Adjust this with KDE's Control Panel (kcontrol), under <B>Appearance
&amp; Themes -&gt; Colors</B>. Non-KDE users may be stuck with
whatever they get.</I></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/kde-adjust-contrast.png" NAME="Graphic15" ALIGN=BOTTOM WIDTH=304 HEIGHT=374 BORDER=0></P>
<H3 CLASS="western">Setting Initial Track Volume and Other Parameters</H3>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">These
initial controllers here inside the instrument provide the mechanism
whereby you configure initial volume, pan, and similar settings for
the track (if supported by the equipment, and properly configured
into the device.) Any tracks that are routed to play through this
instrument will share this instrument's parameters. 
</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">If you
change these knobs in the middle of playing a composition, the new
settings should take effect immediately. However, they are still only
initial settings for the instrument, and the new setting will be in
effect after you've rewound the composition to the beginning.. If,
for example, you want to change the pan setting in the middle of a
composition, you must do it by inserting controller events from the
event list editor, or from a controller ruler in either the matrix or
notation editors, as I will explain in due course.</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in"><I>NOTE:
If you notice that your initial controllers are not taking effect, as
can sometimes be the case when you have changed a controller value in
the middle of a composition, and have rewound it to the beginning,
you may need to check <B>Settings -&gt; Configure Rosegarden -&gt;
Sequencer -&gt; Send all MIDI Controllers at start of playback [x]</B></I></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/document-transmit-controllers.png" NAME="Graphic13" ALIGN=BOTTOM WIDTH=304 HEIGHT=65 BORDER=0></P>
<H2 CLASS="western"><BR><BR>
</H2>
<P><BR><BR>
</P>
<H2 CLASS="western">Audio Instrument Parameters</H2>
<P>If you want to use a track for audio, you'll need to make it an
audio track by routing it to the &quot;Audio&quot; device. (If you do
not have an &quot;Audio&quot; device available, please ensure that
your JACK server is running.)</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/select-jack.png" NAME="Graphic5" ALIGN=BOTTOM WIDTH=252 HEIGHT=284 BORDER=0></P>
<H2 CLASS="western">Audio Instrument Parameters</H2>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">Audio
instruments have different controls available in the <B>Instrument
Parameters</B> box..</P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">stereo
channels, and a mono/stereo toggle. (<IMG SRC="../pixmaps/audio-mono.png" NAME="Graphic8" ALIGN=BOTTOM WIDTH=24 HEIGHT=24 BORDER=0>
<IMG SRC="../pixmaps/audio-stereo.png" NAME="Graphic9" ALIGN=BOTTOM WIDTH=24 HEIGHT=25 BORDER=0>).</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/instrument-parameters-audio.png" NAME="Graphic7" ALIGN=BOTTOM WIDTH=228 HEIGHT=208 BORDER=0></P>
<P STYLE="margin-bottom: 0.2in; border: none; padding: 0in">If you
wish to assign LADSPA plugins to the track, you may use one of the
&quot;&lt;no plugin&gt;&quot; buttons to summon a dialog similar to
this one. You can narrow in on what you want using the <B>Category:</B>
selector, and then dial in a particular plugin with the <B>Plugin:</B>
selector. As you dial through these, the knobs in the bottom half of
this dialog box will change to reflect the controls that are
available for this particular plugin; ranging from one knob to a
screen full of them. You can layer up to five plugins for each
instrument in the &quot;JACK Audio&quot; device, hardware allowing.
Some plugins are particularly expensive in their use of your system's
resources, so using too many may cause performance problems.</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0.2in; border: none; padding: 0in">
<IMG SRC="../pixmaps/JACK-plugins.png" NAME="Graphic1" ALIGN=BOTTOM WIDTH=360 HEIGHT=278 BORDER=0></P>
<H2 CLASS="western">Synth Plugin Instrument Parameters</H2>
<P>As mentioned in the introduction, Rosegarden is the first
sequencer for Linux to employ the new DSSI plugin architecture. If
you have your JACK server running, and your Rosegarden package was
built correctly, you should have a &quot;Synth plugin&quot; device
available. Each of the 16 synth plugin instruments can take a
different synth plugin, and can have up to five LADSPA plugins
layered on top of the basic sound the synth plugin produces.</P>
<P>Begin by routing a track first to this device, and then to one of
the 16 available instruments.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/select-synth-pluging.png" NAME="Graphic17" ALIGN=BOTTOM WIDTH=228 HEIGHT=141 BORDER=0></P>
<H3 CLASS="western">Select a Synth Plugin</H3>
<P>After routing a track to a synth plugin instrument, the <B>Instrument
Parameters</B> box will show a new set of controls. These are similar
to the controls for audio instruments. To configure this synth plugin
instrument, begin by clicking on the &quot;&lt;no synth&gt;&quot;
button.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/synth-plugin-ipb.png" NAME="Graphic18" ALIGN=BOTTOM WIDTH=228 HEIGHT=211 BORDER=0></P>
<P>After first clicking the button, you will need to dial in one of
the plugins you have installed.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/synth-plugin-no-plugin.png" NAME="Graphic19" ALIGN=BOTTOM WIDTH=228 HEIGHT=147 BORDER=0></P>
<P><BR><BR>
</P>
<H4 CLASS="western">Xsynth</H4>
<P>After dialing the <B>Plugin</B> combo box to &quot;Xsynth DSSI
Plugin&quot; the dialog box will transform itself into something like
this:</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/synth-plugin-xsynth.png" NAME="Graphic20" ALIGN=BOTTOM WIDTH=456 HEIGHT=372 BORDER=0></P>
<P>I have to leave it up to you to play with the knobs and discover
how to twiddle this into making interesting noises. This synth plugin
is not nearly as complex as ZynAddSubFX, but having it effectively
built right into Rosegarden has some advantages.</P>
<UL>
	<LI><P STYLE="font-weight: medium">no need to tinker with JACK
	routing, since it plays through Rosegarden's JACK connection</P>
	<LI><P STYLE="font-weight: medium">settings for the knobs are saved
	with the composition, which allows you to dial up custom patches and
	save them with your file without having to fool with the external
	editor</P>
	<LI><P STYLE="font-weight: medium">with 16 plugin instruments, you
	can have 16 Xsynths if you want, each with its own patch, and its
	own set of LADSPA plugins</P>
</UL>
<H5 CLASS="western">Xsynth's External Editor</H5>
<P>If you click on the 
<IMG SRC="../pixmaps/synth-plugin-editor-button.png" NAME="Graphic21" ALIGN=BOTTOM WIDTH=110 HEIGHT=32 BORDER=0>
button you can use Xsynth's external editor to manage its controls in
a different way, change several parameters, and to manage your
collection of custom patches. While it isn't necessary to do this,
you may find it useful to save named presets to disk, and you might
find the plugin's own native GUI is slightly more informative with
respect to what the various knobs are for. (In particular, the native
GUI tells you what kind of wave form the various numbers represent,
while Rosegarden's plugin interface does not.) The GUI is an
independent module unrelated to Rosegarden, which is why the look and
feel are so different.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/synth-plugin-xsynth-gui.png" NAME="Graphic22" ALIGN=BOTTOM WIDTH=224 HEIGHT=380 BORDER=0></P>
<P ALIGN=LEFT><I>TIP: This thing is uncomfortably large for my
screen. If you have the same problem, remember that you can drag it
around even when its title bar is hidden off the top of the screen.
Hold down the Alt key while clicking on the window with your mouse,
and reposition it as necessary to get to all of the controls.</I></P>
<H4 CLASS="western">FluidSynth</H4>
<P>FluidSynth-DSSI is a plugin built around the same underlying
engine that powers QSynth. The plugin implementation isn't quite as
friendly to use as QSynth, but it affords most of the same
functionality in a package that's integrated into Rosegarden's user
interface.</P>
<P>After dialing the <B>Plugin</B> combo box to &quot;FluidSynth-DSSI
Plugin&quot; the dialog box will transform itself into something like
this:</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/synth-plugin-fluidsynth.png" NAME="Graphic24" ALIGN=BOTTOM WIDTH=228 HEIGHT=179 BORDER=0></P>
<H5 CLASS="western" ALIGN=LEFT STYLE="font-weight: medium">FluidSynth's
External Editor</H5>
<P ALIGN=LEFT STYLE="font-weight: medium">There are no knobs for this
one, and everything must be done using the external GUI.</P>
<P>Click on the 
<IMG SRC="../pixmaps/synth-plugin-editor-button.png" NAME="Graphic23" ALIGN=MIDDLE WIDTH=110 HEIGHT=32 BORDER=0>
button.</P>
<P>You'll need to load a soundfont into it with the 
<IMG SRC="../pixmaps/synth-plugin-select-soundfont.png" NAME="Graphic26" ALIGN=BOTTOM WIDTH=136 HEIGHT=26 BORDER=0>
button.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/synth-plugin-fluidsynth-gui.png" NAME="Graphic25" ALIGN=BOTTOM WIDTH=456 HEIGHT=360 BORDER=0></P>
<H5 CLASS="western">Selecting a Program</H5>
<P>After you have loaded a soundfont, you can use the <B>Program</B>
combo box to dial in any of the programs available in the soundfont.
This interface does not separate them into individual banks in the
same fashion you saw elsewhere. Instead, all available programs in
the entire soundfont are presented within one top to bottom list.</P>
<P ALIGN=CENTER><IMG SRC="../pixmaps/synth-plugin-select-program.png" NAME="Graphic27" ALIGN=BOTTOM WIDTH=228 HEIGHT=179 BORDER=0></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.2in; border: none; padding: 0in; font-weight: medium">
<I>NOTE: In the case of the particular soundfont I have loaded in the
example above, the extra drum kits that are normally found in bank 1
0 (using QSynth or the Sound Blaster Live!) are instead located
starting at program number 128. There is, in effect, only one
gigantic bank.</I></P>
</BODY>
</HTML>